<div class="container-fluid">
  <form
    class="ml-3 mr-3 mb-3"
    [ngStyle]="{ display: showSearchParams ? 'block' : 'none' }"
    id="open"
  >
    <p class="search-parameters">Search Parameters</p>
    <div class="d-flex justify-content-between">
      <div>
        <label>Name</label><br />
        <input type="text" placeholder="Name" />
      </div>
      <div>
        <label>DOJ</label><br />
        <input type="text" placeholder="Date of Joining" />
      </div>
      <div>
        <label>Employee Code</label><br />
        <input type="text" placeholder="Employee Code" />
      </div>
      <div class="d-flex align-items-end">
        <button class="search-btn mr-2">Search</button>
        <button
          class="clear-btn ml-2"
          [class.clear-disabled]="!isClearEnable"
          [disabled]="!isClearEnable"
        >
          Clear
        </button>
      </div>
    </div>
  </form>
  <div class="search-tab d-flex align-items-center justify-content-center">
    Search
    <button class="search-collapse ml-0">
      <img
        [class.rotate-icon]="!showSearchParams"
        class="ml-3"
        width="16px"
        height="16px"
        src="../../assets/images/caret-up-fill.svg"
        (click)="showSearchParams = !showSearchParams"
      />
    </button>
  </div>
  <div class="float-right mt-2 mr-3">
    <button class="add-employee-btn" (click)="openAddEmpDialog()">
      Add Employee Details
    </button>
  </div>

  <div class="table-responsive mt-3">
    <table
      class="main-table request_table"
      mat-table
      matSort
      [dataSource]="empListDataSource"
      multiTemplateDataRows
    >
      <ng-container matColumnDef="expand_action">
        <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
        <td mat-cell *matCellDef="let element" class="element-row">
          <mat-icon [ngStyle]="{'color':'#C1C1C1'}" style="cursor: pointer;"
            (click)="
              expandedElement = expandedElement === element ? null : element
            "
            >{{
              expandedElement === element
                ? "expand_more"
                : "keyboard_arrow_right"
            }}</mat-icon
          >
        </td>
      </ng-container>

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Emp Code</th>
        <td mat-cell *matCellDef="let element" class="element-row">
          {{ element.employeeId }}
        </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
        <td mat-cell *matCellDef="let element" class="element-row">
          {{ element.firstName }} {{ element.lastName }}
        </td>
      </ng-container>

      <ng-container matColumnDef="doj">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Date Of Joining
        </th>
        <td mat-cell *matCellDef="let element" class="element-row">
          {{ element.dateOfJoining }}
        </td>
      </ng-container>

      <ng-container matColumnDef="dob">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Date Of Birth</th>
        <td mat-cell *matCellDef="let element" class="element-row">
          {{ element.dateOfBirth }}
        </td>
      </ng-container>

      <ng-container matColumnDef="doe">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Date Of Exit</th>
        <td mat-cell *matCellDef="let element" class="element-row">
          {{ element.dateOfExit }}
        </td>
      </ng-container>

      <ng-container matColumnDef="cityType">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>City</th>
        <td mat-cell *matCellDef="let element" class="element-row">
          {{ element.cityType }}
        </td>
      </ng-container>

      <ng-container matColumnDef="aadhaar">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Aadhaar Number
        </th>
        <td mat-cell *matCellDef="let element" class="element-row">
          {{ element.aadhaar }}
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
        <td mat-cell *matCellDef="let element" class="element-row">
          {{ element.status }}
        </td>
      </ng-container>

      <ng-container matColumnDef="loading">
        <mat-footer-cell *matFooterCellDef> Loading data.... </mat-footer-cell>
      </ng-container>
      <ng-container matColumnDef="noData">
        <mat-footer-cell *matFooterCellDef> No Data </mat-footer-cell>
      </ng-container>

      <!--    Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
      <ng-container matColumnDef="expandedDetail" id="demo">
        <td
          class="expand_row"
          mat-cell
          *matCellDef="let element"
          [attr.colspan]="displayedColumns.length"
        >
          <div
            class="request-detail"
            [@detailExpand]="
              element == expandedElement ? 'expanded' : 'collapsed'
            "
          >
            <div>
              <table
                style="border: 1px solid gainsboro"
                class="table table-sm mt-2 mb-2"
              >
                <thead>
                  <tr style="border: 1px solid gainsboro">
                    <th
                      style="
                        border: 1px solid gainsboro;
                        font-size: 11px;
                        color: gray;
                      "
                      *ngFor="let emp of empDetails"
                    >
                      {{ emp.header }}
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="border: 1px solid gainsboro">
                    <td
                      style="
                        border: 1px solid gainsboro;
                        font-size: 12px;
                        color: rgb(44, 42, 42);
                      "
                      *ngFor="let emp of empDetails"
                    >
                      {{ element[emp.field] }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="mt-4">
              <p
                style="
                  color: rgba(0, 0, 0, 0.87);
                  font-size: 13px;
                  font-family: Montserrat;
                "
              >
                CTC Details :
              </p>
              <table
                style="border: 1px solid gainsboro"
                class="table table-sm mt-2 mb-2"
              >
                <thead>
                  <tr style="border: 1px solid gainsboro">
                    <th
                      style="
                        border: 1px solid gainsboro;
                        font-size: 11px;
                        color: gray;
                      "
                      *ngFor="let ctc of employeeCTCDetails"
                    >
                      {{ ctc.ctcComponent | replaceUnderscore | titlecase }}
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="border: 1px solid gainsboro">
                    <td
                      style="
                        border: 1px solid gainsboro;
                        font-size: 12px;
                        color: rgb(44, 42, 42); ;
                      "
                      *ngFor="let ctc of employeeCTCDetails"
                    >
                      {{ ctc.amount }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let element; columns: displayedColumns"
        (click)="getEmployeeCTCDetails(element)"
      ></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: ['expandedDetail']"
        class="request-detail-row expand_row"
      ></tr>
    </table>
    <mat-paginator
      [pageSizeOptions]="[5, 10, 20]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
</div>
